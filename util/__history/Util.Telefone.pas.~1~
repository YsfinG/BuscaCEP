unit Util.Telephone;

interface

uses
   Vcl.Mask;

type
   TMaskEdit = class(Vcl.Mask.TMaskEdit)
   private
      vTelephone: Boolean;
   private
      procedure GetTelephone(const Value: Boolean);
      function SetTelephone: Boolean;
   protected
      procedure DoEnter; override;
      procedure DoExit; override;
   published
      property Telephone: Boolean read SetTelephone write GetTelephone default False;
   end;

implementation

{ TMaskEdit }

procedure TMaskEdit.DoEnter;
begin
   inherited;

   if Telephone then
   begin
      if Length(Self.Text) > 10 then
         Self.EditMask := '(99) 99999-9999;0;_'
      else
         Self.EditMask := '(99) 9999-99999;0;_';
   end;
end;

procedure TMaskEdit.DoExit;
begin
   inherited;

   if Telephone then
   begin
      if Length(Self.Text) > 10 then
         Self.EditMask := '(99) 99999-9999;0;_'
      else
      if Length(Self.Text) = 10 then
         Self.EditMask := '(99) 9999-9999;0;_'
      else
         Self.EditMask := '(99) 9999-99999;0;_';
   end;
end;

procedure TMaskEdit.GetTelephone(const Value: Boolean);
begin
   vTelephone := Value;
end;

function TMaskEdit.SetTelephone: Boolean;
begin
   Result := vTelephone;
end;

end.
